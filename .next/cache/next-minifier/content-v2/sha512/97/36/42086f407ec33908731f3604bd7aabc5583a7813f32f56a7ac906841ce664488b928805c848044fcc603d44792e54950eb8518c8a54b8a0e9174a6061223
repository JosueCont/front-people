{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{LrPk:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/home\",function(){return a(\"rmSC\")}])},rmSC:function(e,t,a){\"use strict\";a.r(t);var n=a(\"nKUr\"),s=a(\"ODXe\"),c=a(\"Ol7k\"),r=a(\"Vl3Y\"),i=a(\"BMrR\"),l=a(\"kPKH\"),o=a(\"bE4q\"),j=a(\"2/Rp\"),d=a(\"5rEg\"),m=a(\"2fM7\"),u=a(\"Sdc0\"),b=a(\"wCAj\"),h=a(\"vDqi\"),p=a.n(h),O=a(\"OcYQ\"),f=a(\"q1tI\"),x=a(\"G3dp\"),g=a(\"/MfK\"),v=a(\"+YFz\"),y=a(\"xvlK\"),_=a(\"dF/Y\"),w=a(\"Cgje\"),k=(a(\"LvDl\"),a(\"o0o1\")),I=a.n(k),C=a(\"HaE+\"),F=a(\"tsqr\"),E=a(\"kLXV\"),S=a(\"zeV3\"),N=a(\"+eQT\"),P=function(e){var t=r.a.useForm(),a=Object(s.a)(t,1)[0],i=Object(f.useState)([]),l=i[0],o=i[1],u=Object(f.useState)([]),b=u[0],h=u[1],x=Object(f.useState)([]),g=x[0],v=x[1],y=Object(f.useState)(\"\"),_=y[0],w=y[1];Object(f.useEffect)((function(){k(\"5f417a53c37f6275fb614104\")}),[]);var k=function(){var e=Object(C.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={\"client-id\":\"5f417a53c37f6275fb614104\",\"Content-Type\":\"application/json\"},p.a.get(\"https://khonnect.hiumanlab.com/group/list/\",{headers:a}).then((function(e){if(200===e.status){var t=e.data.data;t=t.map((function(e){return{label:e.name,value:e.id}})),o(t)}})).catch((function(e){console.log(e)})),p.a.get(O.a+\"/person/person-type/\").then((function(e){if(200===e.status){var t=e.data.results;t=t.map((function(e){return{label:e.name,value:e.id}})),h(t)}})).catch((function(e){console.log(e)})),p.a.get(O.a+\"/person/job\").then((function(e){if(200===e.status){var t=e.data.results;t=t.map((function(e){return{label:e.name,value:e.id}})),v(t)}})).catch((function(e){console.log(e)}));case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(t){p.a.post(O.a+\"/person/person/\",t).then((function(t){F.b.success(\"Agregado correctamente\"),a.resetFields(),e.close(!1)})).catch((function(e){F.b.error(\"Error al agregar, intente de nuevo\")}))};var T={required:!0,message:\"Este campo es requerido\"};return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(c.a,{children:Object(n.jsx)(E.a,{maskClosable:!1,title:\"Alta de personas\",centered:!0,visible:e.visible,onOk:function(){return e.close(!1)},onCancel:a.resetFields(),footer:null,children:Object(n.jsxs)(r.a,{onFinish:function(e){\"\"!==_&&(e.birth_date=_),P(e)},form:a,initialValues:{name:\"\",flast_name:\"\",mlast_name:\"\",birth_date:\"\",perms:[],email:\"\",password:\"\"},children:[Object(n.jsxs)(S.b,{children:[Object(n.jsx)(r.a.Item,{name:\"person_type\",children:Object(n.jsx)(m.a,{options:b,placeholder:\"Tipo de persona\"})}),Object(n.jsx)(r.a.Item,{name:\"job\",children:Object(n.jsx)(m.a,{options:g,placeholder:\"Puesto de trabajo\"})})]}),Object(n.jsx)(r.a.Item,{rules:[T],name:\"first_name\",children:Object(n.jsx)(d.a,{type:\"text\",placeholder:\"Nombre\"})}),Object(n.jsx)(r.a.Item,{rules:[T],name:\"flast_name\",children:Object(n.jsx)(d.a,{type:\"text\",placeholder:\"Apellido paterno...\"})}),Object(n.jsx)(r.a.Item,{name:\"mlast_name\",children:Object(n.jsx)(d.a,{type:\"text\",placeholder:\"Apellido materno...\"})}),Object(n.jsxs)(S.b,{children:[Object(n.jsx)(r.a.Item,{name:\"gender\",children:Object(n.jsx)(m.a,{options:[{label:\"Maculino\",value:1},{label:\"Femenino\",value:2},{label:\"Otro\",value:3}],placeholder:\"G\\xe9nero\"})}),Object(n.jsx)(r.a.Item,{children:Object(n.jsx)(N.a,{onChange:function(e,t){w(t)},moment:\"YYYY-MM-DD\",placeholder:\"Fecha de nacimiento\"})})]}),Object(n.jsx)(r.a.Item,{rules:[{type:\"email\",message:\"Ingrese un correo electronico valido\"},T],name:\"email\",children:Object(n.jsx)(d.a,{type:\"email\",placeholder:\"E-mail\"})}),Object(n.jsx)(r.a.Item,{rules:[T],name:\"password\",children:Object(n.jsx)(d.a.Password,{type:\"text\",placeholder:\"Contrase\\xf1a\"})}),Object(n.jsx)(r.a.Item,{name:\"groups\",children:Object(n.jsx)(m.a,{mode:\"multiple\",options:l,showArrow:!0,style:{width:\"100%\"},placeholder:\"Permisos...\"})}),Object(n.jsx)(r.a.Item,{labelAlign:\"right\",children:Object(n.jsxs)(S.b,{style:{float:\"right\"},children:[Object(n.jsx)(j.a,{type:\"danger\",onClick:function(){return e.close(!1)},children:\"Cancelar\"}),Object(n.jsx)(j.a,{type:\"primary\",htmlType:\"submit\",children:\"Guardar\"})]})})]})})})})},T=a(\"YFqc\"),A=a.n(T),Y=c.a.Content;t.default=function(){var e=Object(f.useState)([]),t=e[0],a=e[1],h=Object(f.useState)(!1),k=h[0],I=h[1],C=Object(f.useState)(!0),F=C[0],E=C[1],S=Object(f.useState)(!1),N=S[0],T=S[1],L=r.a.useForm(),M=Object(s.a)(L,1)[0],q={},D=function(e){I(!0),void 0==e?p.a.get(O.a+\"/person/person/\").then((function(e){e.data.results.map((function(e){e.key=e.id,e.fullname=e.first_name+\" \"+e.flast_name+\" \"+e.mlast_name,e.timestamp=e.timestamp.substring(0,10)})),a(e.data.results),I(!1)})).catch((function(e){console.log(e)})):p.a.post(O.a+\"/person/person/get_list_persons/ \",q).then((function(e){e.data.map((function(e){e.key=e.id,e.fullname=e.first_name+\" \"+e.flast_name+\" \"+e.mlast_name,e.timestamp=e.timestamp.substring(0,10)})),a(e.data),I(!1)})).catch((function(e){a([]),I(!1),console.log(e)}))};Object(f.useEffect)((function(){D()}),[]);var z=[{title:\"Nombre\",dataIndex:\"fullname\",key:\"fullname\"},{title:\"Fecha de registro\",dataIndex:\"timestamp\",key:\"timestamp\"},{title:\"RFC\",dataIndex:\"rfc\",key:\"rfc\"},{title:\"IMSS\",dataIndex:\"imss\",key:\"imss\"},{title:\"Opciones\",render:function(e){return Object(n.jsx)(\"div\",{children:Object(n.jsxs)(i.a,{gutter:16,children:[Object(n.jsx)(l.a,{className:\"gutter-row\",span:6,children:Object(n.jsx)(A.a,{href:\"/home/\".concat(e.id),children:Object(n.jsx)(x.a,{})})}),Object(n.jsx)(l.a,{className:\"gutter-row\",span:6,children:Object(n.jsx)(g.a,{})}),Object(n.jsx)(l.a,{className:\"gutter-row\",span:6,children:Object(n.jsx)(v.a,{})})]})})}}],R=function(e){T(e)};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(c.a,{children:[Object(n.jsx)(w.a,{}),Object(n.jsxs)(Y,{className:\"site-layout\",style:{padding:\"0 50px\",marginTop:64},children:[Object(n.jsxs)(o.a,{style:{margin:\"16px 0\"},children:[Object(n.jsx)(o.a.Item,{children:\"Home\"}),Object(n.jsx)(o.a.Item,{children:\"Person\"})]}),Object(n.jsx)(\"div\",{style:{padding:\"1%\",float:\"right\"},children:Object(n.jsxs)(j.a,{style:{background:\"#fa8c16\",fontWeight:\"bold\",color:\"white\"},onClick:function(){return R(!0)},children:[Object(n.jsx)(y.a,{}),\"Agregar persona\"]})}),Object(n.jsxs)(\"div\",{className:\"site-layout-background\",style:{padding:24,minHeight:380,height:\"100%\"},children:[Object(n.jsxs)(\"div\",{style:{padding:24},children:[Object(n.jsxs)(r.a,{onFinish:function(e){void 0!==e.name&&\"\"!==e.name&&(q.first_name=e.name),void 0!==e.gender&&(q.gender=e.gender),void 0!==F&&(q.is_active=0==F?0:1),D(\"filter\")},layout:\"vertical\",form:M,children:[Object(n.jsxs)(i.a,{children:[Object(n.jsx)(l.a,{span:18,children:Object(n.jsx)(r.a.Item,{name:\"name\",children:Object(n.jsx)(d.a,{placeholder:\"Nombre...\"})})}),Object(n.jsx)(l.a,{span:5,children:Object(n.jsx)(r.a.Item,{name:\"gender\",children:Object(n.jsx)(m.a,{style:{marginLeft:\"10%\",width:\"100%\"},options:[{label:\"Maculino\",value:1},{label:\"Femenino\",value:2},{label:\"Otro\",value:3}],placeholder:\"G\\xe9nero\"})})})]}),Object(n.jsxs)(i.a,{style:{marginTop:\"2%\"},children:[Object(n.jsx)(l.a,{span:4,children:Object(n.jsxs)(r.a.Item,{name:\"is_active\",children:[Object(n.jsx)(\"label\",{children:Object(n.jsx)(\"span\",{style:{fontWeight:\"bold\"},children:\"Activos:\"})}),Object(n.jsx)(u.a,{style:{marginLeft:\"10%\"},defaultChecked:!0,onChange:function(){E(!F)}})]})}),Object(n.jsx)(l.a,{span:8,style:{float:\"right\"},children:Object(n.jsx)(r.a.Item,{children:Object(n.jsx)(j.a,{type:\"primary\",htmlType:\"submit\",children:\"Buscar\"})})})]})]}),Object(n.jsx)(\"div\",{style:{float:\"right\"},children:Object(n.jsx)(j.a,{type:\"primary\",icon:Object(n.jsx)(_.a,{}),size:{size:\"large\"},onClick:function(){return I(!0),void p.a.get(O.a+\"/person/import-export-person/csv\").then((function(e){var t=e.headers[\"content-type\"],a=new Blob([e.data],{type:t,encoding:\"UTF-8\"}),n=document.createElement(\"a\");n.href=window.URL.createObjectURL(a),n.download=\"Personas.csv\",n.click(),I(!1)})).catch((function(e){I(!1),console.log(e)}))},children:\"Descargar resultados\"})})]}),Object(n.jsx)(b.a,{size:\"small\",columns:z,dataSource:t,loading:k})]})]}),Object(n.jsx)(P,{close:R,visible:N})]})})}}},[[\"LrPk\",0,2,5,8,1,3,4,6]]]);","extractedComments":[]}