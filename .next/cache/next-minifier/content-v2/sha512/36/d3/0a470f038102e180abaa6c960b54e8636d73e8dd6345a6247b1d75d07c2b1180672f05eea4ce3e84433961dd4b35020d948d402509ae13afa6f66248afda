{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{LrPk:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/home\",function(){return a(\"rmSC\")}])},rmSC:function(e,t,a){\"use strict\";a.r(t);var n=a(\"nKUr\"),s=a(\"o0o1\"),c=a.n(s),r=a(\"HaE+\"),i=a(\"ODXe\"),o=a(\"Ol7k\"),l=a(\"Vl3Y\"),j=a(\"BMrR\"),d=a(\"kPKH\"),u=a(\"tsqr\"),m=a(\"bE4q\"),b=a(\"5rEg\"),p=a(\"2fM7\"),h=a(\"Sdc0\"),f=a(\"2/Rp\"),O=a(\"wCAj\"),x=a(\"vDqi\"),g=a.n(x),v=a(\"OcYQ\"),y=a(\"q1tI\"),_=a(\"G3dp\"),w=a(\"/MfK\"),k=a(\"+YFz\"),I=a(\"dF/Y\"),F=a(\"z7Xi\"),C=a(\"Cgje\"),E=(a(\"LvDl\"),a(\"kLXV\")),S=a(\"zeV3\"),N=a(\"+eQT\"),P=function(e){var t=l.a.useForm(),a=Object(i.a)(t,1)[0],s=Object(y.useState)([]),j=s[0],d=s[1],m=Object(y.useState)([]),h=m[0],O=m[1],x=Object(y.useState)([]),_=x[0],w=x[1],k=Object(y.useState)(\"\"),I=k[0],F=k[1];Object(y.useEffect)((function(){C(\"5f417a53c37f6275fb614104\")}),[]);var C=function(){var e=Object(r.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={\"client-id\":\"5f417a53c37f6275fb614104\",\"Content-Type\":\"application/json\"},g.a.get(\"https://khonnect.hiumanlab.com/group/list/\",{headers:a}).then((function(e){if(200===e.status){var t=e.data.data;t=t.map((function(e){return{label:e.name,value:e.id}})),d(t)}})).catch((function(e){console.log(e)})),g.a.get(v.a+\"/person/person-type/\").then((function(e){if(200===e.status){var t=e.data.results;t=t.map((function(e){return{label:e.name,value:e.id}})),O(t)}})).catch((function(e){console.log(e)})),g.a.get(v.a+\"/person/job\").then((function(e){if(200===e.status){var t=e.data.results;t=t.map((function(e){return{label:e.name,value:e.id}})),w(t)}})).catch((function(e){console.log(e)}));case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(t){g.a.post(v.a+\"/person/person/\",t).then((function(t){u.b.success(\"Agregado correctamente\"),a.resetFields(),e.close(!1)})).catch((function(e){u.b.error(\"Error al agregar, intente de nuevo\")}))};var T={required:!0,message:\"Este campo es requerido\"};return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(o.a,{children:Object(n.jsx)(E.a,{maskClosable:!1,title:\"Alta de personas\",centered:!0,visible:e.visible,onCancel:function(){return e.close(!1),void a.resetFields()},footer:null,children:Object(n.jsxs)(l.a,{onFinish:function(e){\"\"!==I&&(e.birth_date=I),P(e)},form:a,initialValues:{name:\"\",flast_name:\"\",mlast_name:\"\",birth_date:\"\",perms:[],email:\"\",password:\"\"},children:[Object(n.jsxs)(S.b,{children:[Object(n.jsx)(l.a.Item,{name:\"person_type\",children:Object(n.jsx)(p.a,{options:h,placeholder:\"Tipo de persona\"})}),Object(n.jsx)(l.a.Item,{name:\"job\",children:Object(n.jsx)(p.a,{options:_,placeholder:\"Puesto de trabajo\"})})]}),Object(n.jsx)(l.a.Item,{rules:[T],name:\"first_name\",children:Object(n.jsx)(b.a,{type:\"text\",placeholder:\"Nombre\"})}),Object(n.jsx)(l.a.Item,{rules:[T],name:\"flast_name\",children:Object(n.jsx)(b.a,{type:\"text\",placeholder:\"Apellido paterno...\"})}),Object(n.jsx)(l.a.Item,{name:\"mlast_name\",children:Object(n.jsx)(b.a,{type:\"text\",placeholder:\"Apellido materno...\"})}),Object(n.jsxs)(S.b,{children:[Object(n.jsx)(l.a.Item,{name:\"gender\",children:Object(n.jsx)(p.a,{options:[{label:\"Maculino\",value:1},{label:\"Femenino\",value:2},{label:\"Otro\",value:3}],placeholder:\"G\\xe9nero\"})}),Object(n.jsx)(l.a.Item,{children:Object(n.jsx)(N.a,{onChange:function(e,t){F(t)},moment:\"YYYY-MM-DD\",placeholder:\"Fecha de nacimiento\"})})]}),Object(n.jsx)(l.a.Item,{rules:[{type:\"email\",message:\"Ingrese un correo electronico valido\"},T],name:\"email\",children:Object(n.jsx)(b.a,{type:\"email\",placeholder:\"E-mail\"})}),Object(n.jsx)(l.a.Item,{rules:[T],name:\"password\",children:Object(n.jsx)(b.a.Password,{type:\"text\",placeholder:\"Contrase\\xf1a\"})}),Object(n.jsx)(l.a.Item,{name:\"groups\",children:Object(n.jsx)(p.a,{mode:\"multiple\",options:j,showArrow:!0,style:{width:\"100%\"},placeholder:\"Permisos...\"})}),Object(n.jsx)(l.a.Item,{labelAlign:\"right\",children:Object(n.jsxs)(S.b,{style:{float:\"right\"},children:[Object(n.jsx)(f.a,{type:\"danger\",onClick:function(){return e.close(!1)},children:\"Cancelar\"}),Object(n.jsx)(f.a,{type:\"primary\",htmlType:\"submit\",children:\"Guardar\"})]})})]})})})})},T=a(\"YFqc\"),Y=a.n(T),A=o.a.Content;t.default=function(){var e=Object(y.useState)([]),t=e[0],a=e[1],s=Object(y.useState)(!1),x=s[0],E=s[1],S=Object(y.useState)(!0),N=S[0],T=S[1],L=Object(y.useState)(!1),M=L[0],q=L[1],D=l.a.useForm(),z=Object(i.a)(D,1)[0],R=Object(y.useRef)(null),X={},G=function(e){E(!0),void 0==e?g.a.get(v.a+\"/person/person/\").then((function(e){e.data.results.map((function(e){e.key=e.id,e.fullname=e.first_name+\" \"+e.flast_name+\" \"+e.mlast_name,e.timestamp=e.timestamp.substring(0,10)})),a(e.data.results),E(!1)})).catch((function(e){console.log(e)})):g.a.post(v.a+\"/person/person/get_list_persons/ \",X).then((function(e){e.data.map((function(e){e.key=e.id,e.fullname=e.first_name+\" \"+e.flast_name+\" \"+e.mlast_name,e.timestamp=e.timestamp.substring(0,10)})),a(e.data),E(!1)})).catch((function(e){a([]),E(!1),console.log(e)}))};Object(y.useEffect)((function(){G()}),[]);var H=[{title:\"Nombre\",dataIndex:\"fullname\",key:\"fullname\"},{title:\"Fecha de registro\",dataIndex:\"timestamp\",key:\"timestamp\"},{title:\"RFC\",dataIndex:\"rfc\",key:\"rfc\"},{title:\"IMSS\",dataIndex:\"imss\",key:\"imss\"},{title:\"Opciones\",render:function(e){return Object(n.jsx)(\"div\",{children:Object(n.jsxs)(j.a,{gutter:16,children:[Object(n.jsx)(d.a,{className:\"gutter-row\",span:6,children:Object(n.jsx)(Y.a,{href:\"/home/\".concat(e.id),children:Object(n.jsx)(_.a,{})})}),Object(n.jsx)(d.a,{className:\"gutter-row\",span:6,children:Object(n.jsx)(w.a,{})}),Object(n.jsx)(d.a,{className:\"gutter-row\",span:6,children:Object(n.jsx)(k.a,{})})]})})}}],U=function(){var e=Object(r.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:\"xlsx\"==V(t.target.files[0].name)?((a=new FormData).append(\"File\",t.target.files[0]),console.log(a),E(!0),g.a.post(v.a+\"/person/import-export-person\",a).then((function(e){E(!1),u.b.success(\"Excel importado correctamente.\"),G()})).catch((function(e){E(!1),u.b.error(\"Error al importar.\"),console.log(e)}))):u.b.error(\"Formato incorrecto, suba un archivo .xlsx\");case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){return/[.]/.exec(e)?/[^.]+$/.exec(e)[0]:void 0};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(o.a,{children:[Object(n.jsx)(C.a,{}),Object(n.jsxs)(A,{className:\"site-layout\",style:{padding:\"0 50px\",marginTop:64},children:[Object(n.jsxs)(m.a,{style:{margin:\"16px 0\"},children:[Object(n.jsx)(m.a.Item,{children:\"Home\"}),Object(n.jsx)(m.a.Item,{children:\"Person\"})]}),Object(n.jsxs)(\"div\",{className:\"site-layout-background\",style:{padding:24,minHeight:380,height:\"100%\"},children:[Object(n.jsxs)(\"div\",{style:{padding:24},children:[Object(n.jsxs)(l.a,{onFinish:function(e){void 0!==e.name&&\"\"!==e.name&&(X.first_name=e.name),void 0!==e.gender&&(X.gender=e.gender),void 0!==N&&(X.is_active=0==N?0:1),G(\"filter\")},layout:\"vertical\",form:z,children:[Object(n.jsxs)(j.a,{children:[Object(n.jsx)(d.a,{span:18,children:Object(n.jsx)(l.a.Item,{name:\"name\",children:Object(n.jsx)(b.a,{placeholder:\"Nombre...\"})})}),Object(n.jsx)(d.a,{span:5,children:Object(n.jsx)(l.a.Item,{name:\"gender\",children:Object(n.jsx)(p.a,{style:{marginLeft:\"10%\",width:\"100%\"},options:[{label:\"Maculino\",value:1},{label:\"Femenino\",value:2},{label:\"Otro\",value:3}],placeholder:\"G\\xe9nero\"})})})]}),Object(n.jsxs)(j.a,{style:{marginTop:\"2%\"},children:[Object(n.jsx)(d.a,{span:4,children:Object(n.jsxs)(l.a.Item,{name:\"is_active\",children:[Object(n.jsx)(\"label\",{children:Object(n.jsx)(\"span\",{style:{fontWeight:\"bold\"},children:\"Activos:\"})}),Object(n.jsx)(h.a,{style:{marginLeft:\"10%\"},defaultChecked:!0,onChange:function(){T(!N)}})]})}),Object(n.jsx)(d.a,{span:8,style:{float:\"right\"},children:Object(n.jsx)(l.a.Item,{children:Object(n.jsx)(f.a,{type:\"primary\",htmlType:\"submit\",children:\"Buscar\"})})})]})]}),Object(n.jsxs)(\"div\",{style:{float:\"right\"},children:[Object(n.jsx)(f.a,{type:\"primary\",icon:Object(n.jsx)(I.a,{}),size:{size:\"large\"},onClick:function(){return E(!0),void g.a.get(v.a+\"/person/import-export-person/csv\").then((function(e){var t=e.headers[\"content-type\"],a=new Blob([e.data],{type:t,encoding:\"UTF-8\"}),n=document.createElement(\"a\");n.href=window.URL.createObjectURL(a),n.download=\"Personas.csv\",n.click(),E(!1)})).catch((function(e){E(!1),console.log(e)}))},children:\"Descargar resultados\"}),Object(n.jsx)(f.a,{icon:Object(n.jsx)(F.a,{}),onClick:function(){R.current.click()},children:\"Importar personas\"}),Object(n.jsx)(\"input\",{ref:R,type:\"file\",style:{display:\"none\"},onChange:function(e){return U(e)}})]})]}),Object(n.jsx)(O.a,{size:\"small\",columns:H,dataSource:t,loading:x})]})]}),Object(n.jsx)(P,{close:function(e){q(e),E(!0),g.a.get(v.a+\"/person/person/\").then((function(e){e.data.results.map((function(e){e.key=e.id,e.fullname=e.first_name+\" \"+e.flast_name+\" \"+e.mlast_name,e.timestamp=e.timestamp.substring(0,10)})),a(e.data.results),E(!1)})).catch((function(e){console.log(e)}))},visible:M})]})})}}},[[\"LrPk\",0,2,5,8,1,3,4,6]]]);","extractedComments":[]}