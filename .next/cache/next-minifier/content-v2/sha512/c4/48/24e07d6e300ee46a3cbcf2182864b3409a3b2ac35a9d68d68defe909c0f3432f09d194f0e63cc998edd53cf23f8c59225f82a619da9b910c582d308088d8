{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{LrPk:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/home\",function(){return a(\"rmSC\")}])},rmSC:function(e,t,a){\"use strict\";a.r(t);var n=a(\"nKUr\"),c=a(\"ODXe\"),s=a(\"Ol7k\"),r=a(\"Vl3Y\"),l=a(\"BMrR\"),o=a(\"kPKH\"),i=a(\"bE4q\"),d=a(\"2/Rp\"),j=a(\"5rEg\"),m=a(\"2fM7\"),u=a(\"Sdc0\"),b=a(\"wCAj\"),h=a(\"vDqi\"),p=a.n(h),O=a(\"OcYQ\"),f=a(\"q1tI\"),x=a(\"G3dp\"),g=a(\"/MfK\"),v=a(\"+YFz\"),y=a(\"xvlK\"),w={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z\"}}]},name:\"download\",theme:\"outlined\"},_=a(\"6VBw\"),I=function(e,t){return f.createElement(_.a,Object.assign({},e,{ref:t,icon:w}))};I.displayName=\"DownloadOutlined\";var k=f.forwardRef(I),S=a(\"Cgje\"),E=(a(\"LvDl\"),a(\"o0o1\")),C=a.n(E),N=a(\"HaE+\"),F=a(\"tsqr\"),P=a(\"kLXV\"),M=a(\"zeV3\"),T=a(\"+eQT\"),A=a(\"ctBr\"),L=function(e){var t=r.a.useForm(),a=Object(c.a)(t,1)[0],l=Object(f.useState)([]),o=l[0],i=l[1],u=Object(f.useState)([]),b=u[0],h=u[1],x=Object(f.useState)([]),g=x[0],v=x[1],y=Object(f.useState)(\"\"),w=y[0],_=y[1];Object(A.useEffect)((function(){I(\"5f417a53c37f6275fb614104\")}),[]);var I=function(){var e=Object(N.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={\"client-id\":\"5f417a53c37f6275fb614104\",\"Content-Type\":\"application/json\"},p.a.get(\"https://khonnect.hiumanlab.com/group/list/\",{headers:a}).then((function(e){if(200===e.status){var t=e.data.data;t=t.map((function(e){return{label:e.name,value:e.id}})),i(t)}})).catch((function(e){console.log(e)})),p.a.get(O.a+\"/person/person-type/\").then((function(e){if(200===e.status){var t=e.data.results;t=t.map((function(e){return{label:e.name,value:e.id}})),h(t)}})).catch((function(e){console.log(e)})),p.a.get(O.a+\"/person/job\").then((function(e){if(200===e.status){var t=e.data.results;t=t.map((function(e){return{label:e.name,value:e.id}})),v(t)}})).catch((function(e){console.log(e)}));case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(t){console.log(\"Crear--\\x3e> \",t),p.a.post(O.a+\"/person/person/\",t).then((function(t){console.log(\"Agreagdo--\\x3e> \",t),F.b.success(\"Agregado correctamente\"),e.close(!1)})).catch((function(e){F.b.error(\"Error al agregar, intente de nuevo\")}))};var S={required:!0,message:\"Este campo es requerido\"};return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(s.a,{children:Object(n.jsx)(P.a,{maskClosable:!1,title:\"Alta de personas\",centered:!0,visible:e.visible,onOk:function(){return e.close(!1)},onCancel:function(){return e.close(!1)},footer:null,children:Object(n.jsxs)(r.a,{onFinish:function(e){\"\"!==w&&(e.birth_date=w),k(e)},form:a,initialValues:{name:\"\",flast_name:\"\",mlast_name:\"\",birth_date:\"\",perms:[],email:\"\",password:\"\"},children:[Object(n.jsxs)(M.b,{children:[Object(n.jsx)(r.a.Item,{name:\"person_type\",children:Object(n.jsx)(m.a,{options:b,placeholder:\"Tipo de persona\"})}),Object(n.jsx)(r.a.Item,{name:\"job\",children:Object(n.jsx)(m.a,{options:g,placeholder:\"Puesto de trabajo\"})})]}),Object(n.jsx)(r.a.Item,{rules:[S],name:\"first_name\",children:Object(n.jsx)(j.a,{type:\"text\",placeholder:\"Nombre\"})}),Object(n.jsx)(r.a.Item,{rules:[S],name:\"flast_name\",children:Object(n.jsx)(j.a,{type:\"text\",placeholder:\"Apellido paterno...\"})}),Object(n.jsx)(r.a.Item,{name:\"mlast_name\",children:Object(n.jsx)(j.a,{type:\"text\",placeholder:\"Apellido materno...\"})}),Object(n.jsxs)(M.b,{children:[Object(n.jsx)(r.a.Item,{name:\"gender\",children:Object(n.jsx)(m.a,{options:[{label:\"Maculino\",value:1},{label:\"Femenino\",value:2},{label:\"Otro\",value:3}],placeholder:\"G\\xe9nero\"})}),Object(n.jsx)(r.a.Item,{children:Object(n.jsx)(T.a,{onChange:function(e,t){console.log(e,t),_(t)},moment:\"YYYY-MM-DD\",placeholder:\"Fecha de nacimiento\"})})]}),Object(n.jsx)(r.a.Item,{rules:[{type:\"email\",message:\"Ingrese un correo electronico valido\"},S],name:\"email\",children:Object(n.jsx)(j.a,{type:\"email\",placeholder:\"E-mail\"})}),Object(n.jsx)(r.a.Item,{rules:[S],name:\"password\",children:Object(n.jsx)(j.a.Password,{type:\"text\",placeholder:\"Contrase\\xf1a\"})}),Object(n.jsx)(r.a.Item,{name:\"groups\",children:Object(n.jsx)(m.a,{mode:\"multiple\",options:o,showArrow:!0,style:{width:\"100%\"},placeholder:\"Permisos...\"})}),Object(n.jsx)(r.a.Item,{labelAlign:\"right\",children:Object(n.jsxs)(M.b,{style:{float:\"right\"},children:[Object(n.jsx)(d.a,{type:\"danger\",onClick:function(){return e.close(!1)},children:\"Cancelar\"}),Object(n.jsx)(d.a,{type:\"primary\",htmlType:\"submit\",children:\"Guardar\"})]})})]})})})})},R=a(\"YFqc\"),V=a.n(R),Y=s.a.Content;t.default=function(){var e=Object(f.useState)([]),t=e[0],a=e[1],h=Object(f.useState)(!1),w=h[0],_=h[1],I=Object(f.useState)(!0),E=I[0],C=I[1],N=Object(f.useState)(!1),F=N[0],P=N[1],M=r.a.useForm(),T=Object(c.a)(M,1)[0],A={},R=function(e){_(!0),void 0==e?p.a.get(O.a+\"/person/person/\").then((function(e){e.data.results.map((function(e){e.key=e.id,e.fullname=e.first_name+\" \"+e.flast_name+\" \"+e.mlast_name,e.timestamp=e.timestamp.substring(0,10)})),a(e.data.results),_(!1)})).catch((function(e){console.log(e)})):p.a.post(O.a+\"/person/person/get_list_persons/ \",A).then((function(e){console.log(\"RESPONSE--\\x3e> \",e),e.data.map((function(e){e.key=e.id,e.fullname=e.first_name+\" \"+e.flast_name+\" \"+e.mlast_name,e.timestamp=e.timestamp.substring(0,10)})),a(e.data),_(!1)})).catch((function(e){a([]),_(!1),console.log(e)}))};Object(f.useEffect)((function(){R()}),[]);var q=[{title:\"Nombre\",dataIndex:\"fullname\",key:\"fullname\"},{title:\"Fecha de registro\",dataIndex:\"timestamp\",key:\"timestamp\"},{title:\"RFC\",dataIndex:\"rfc\",key:\"rfc\"},{title:\"IMSS\",dataIndex:\"imss\",key:\"imss\"},{title:\"Opciones\",render:function(e){return Object(n.jsx)(\"div\",{children:Object(n.jsxs)(l.a,{gutter:16,children:[Object(n.jsx)(o.a,{className:\"gutter-row\",span:6,children:Object(n.jsx)(V.a,{href:\"/home/\".concat(e.id),children:Object(n.jsx)(x.a,{})})}),Object(n.jsx)(o.a,{className:\"gutter-row\",span:6,children:Object(n.jsx)(g.a,{})}),Object(n.jsx)(o.a,{className:\"gutter-row\",span:6,children:Object(n.jsx)(v.a,{})})]})})}}],z=function(e){console.log(\"Open Modal--\\x3e> \",F),P(e)};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(s.a,{children:[Object(n.jsx)(S.a,{}),Object(n.jsxs)(Y,{className:\"site-layout\",style:{padding:\"0 50px\",marginTop:64},children:[Object(n.jsxs)(i.a,{style:{margin:\"16px 0\"},children:[Object(n.jsx)(i.a.Item,{children:\"Home\"}),Object(n.jsx)(i.a.Item,{children:\"Person\"})]}),Object(n.jsx)(\"div\",{style:{padding:\"1%\",float:\"right\"},children:Object(n.jsxs)(d.a,{style:{background:\"#fa8c16\",fontWeight:\"bold\",color:\"white\"},onClick:function(){return z(!0)},children:[Object(n.jsx)(y.a,{}),\"Agregar persona\"]})}),Object(n.jsxs)(\"div\",{className:\"site-layout-background\",style:{padding:24,minHeight:380,height:\"100%\"},children:[Object(n.jsxs)(\"div\",{style:{padding:24},children:[Object(n.jsxs)(r.a,{onFinish:function(e){console.log(\"LOS FILTROS\",e),void 0!==e.name&&\"\"!==e.name&&(A.first_name=e.name),void 0!==e.gender&&(A.gender=e.gender),void 0!==E&&(A.is_active=0==E?0:1),console.log(A),R(\"filter\")},layout:\"vertical\",form:T,children:[Object(n.jsxs)(l.a,{children:[Object(n.jsx)(o.a,{span:18,children:Object(n.jsx)(r.a.Item,{name:\"name\",children:Object(n.jsx)(j.a,{placeholder:\"Nombre...\"})})}),Object(n.jsx)(o.a,{span:5,children:Object(n.jsx)(r.a.Item,{name:\"gender\",children:Object(n.jsx)(m.a,{style:{marginLeft:\"10%\",width:\"100%\"},options:[{label:\"Maculino\",value:1},{label:\"Femenino\",value:2},{label:\"Otro\",value:3}],placeholder:\"G\\xe9nero\"})})})]}),Object(n.jsxs)(l.a,{style:{marginTop:\"2%\"},children:[Object(n.jsx)(o.a,{span:4,children:Object(n.jsxs)(r.a.Item,{name:\"is_active\",children:[Object(n.jsx)(\"label\",{children:Object(n.jsx)(\"span\",{style:{fontWeight:\"bold\"},children:\"Activos:\"})}),Object(n.jsx)(u.a,{style:{marginLeft:\"10%\"},defaultChecked:!0,onChange:function(){console.log(E),C(!E)}})]})}),Object(n.jsx)(o.a,{span:8,style:{float:\"right\"},children:Object(n.jsx)(r.a.Item,{children:Object(n.jsx)(d.a,{type:\"primary\",htmlType:\"submit\",children:\"Buscar\"})})})]})]}),Object(n.jsx)(\"div\",{style:{float:\"right\"},children:Object(n.jsx)(d.a,{type:\"primary\",icon:Object(n.jsx)(k,{}),size:{size:\"large\"},onClick:function(){return _(!0),void p.a.get(O.a+\"/person/import-export-person/csv\").then((function(e){console.log(\"RESPONSE--\\x3e> \",e);var t=e.headers[\"content-type\"],a=new Blob([e.data],{type:t,encoding:\"UTF-8\"}),n=document.createElement(\"a\");n.href=window.URL.createObjectURL(a),n.download=\"Personas.csv\",n.click(),_(!1)})).catch((function(e){_(!1),console.log(e)}))},children:\"Descargar resultados\"})})]}),Object(n.jsx)(b.a,{size:\"small\",columns:q,dataSource:t,loading:w})]})]}),Object(n.jsx)(L,{close:z,visible:F})]})})}}},[[\"LrPk\",0,2,6,9,1,3,4,7,5]]]);","extractedComments":[]}