{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{LrPk:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/home\",function(){return n(\"rmSC\")}])},rmSC:function(e,t,n){\"use strict\";n.r(t);var a=n(\"nKUr\"),c=n(\"o0o1\"),s=n.n(c),r=n(\"HaE+\"),o=n(\"ODXe\"),i=n(\"Ol7k\"),l=n(\"Vl3Y\"),d=n(\"BMrR\"),j=n(\"kPKH\"),u=n(\"tsqr\"),m=n(\"bE4q\"),p=n(\"5rEg\"),b=n(\"2fM7\"),h=n(\"Sdc0\"),f=n(\"2/Rp\"),O=n(\"wCAj\"),x=n(\"vDqi\"),g=n.n(x),v=n(\"OcYQ\"),y=n(\"q1tI\"),w=n(\"G3dp\"),_=n(\"/MfK\"),k=n(\"+YFz\"),I=n(\"xvlK\"),F=n(\"dF/Y\"),C=n(\"z7Xi\"),E=n(\"Cgje\"),S=(n(\"LvDl\"),n(\"kLXV\")),N=n(\"zeV3\"),P=n(\"+eQT\"),T=function(e){var t=l.a.useForm(),n=Object(o.a)(t,1)[0],c=Object(y.useState)([]),d=c[0],j=c[1],m=Object(y.useState)([]),h=m[0],O=m[1],x=Object(y.useState)([]),w=x[0],_=x[1],k=Object(y.useState)(\"\"),I=k[0],F=k[1];Object(y.useEffect)((function(){C(\"5f417a53c37f6275fb614104\")}),[]);var C=function(){var e=Object(r.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={\"client-id\":\"5f417a53c37f6275fb614104\",\"Content-Type\":\"application/json\"},g.a.get(\"https://khonnect.hiumanlab.com/group/list/\",{headers:n}).then((function(e){if(200===e.status){var t=e.data.data;t=t.map((function(e){return{label:e.name,value:e.id}})),j(t)}})).catch((function(e){console.log(e)})),g.a.get(v.a+\"/person/person-type/\").then((function(e){if(200===e.status){var t=e.data.results;t=t.map((function(e){return{label:e.name,value:e.id}})),O(t)}})).catch((function(e){console.log(e)})),g.a.get(v.a+\"/person/job\").then((function(e){if(200===e.status){var t=e.data.results;t=t.map((function(e){return{label:e.name,value:e.id}})),_(t)}})).catch((function(e){console.log(e)}));case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(t){g.a.post(v.a+\"/person/person/\",t).then((function(t){u.b.success(\"Agregado correctamente\"),n.resetFields(),e.close(!1)})).catch((function(e){u.b.error(\"Error al agregar, intente de nuevo\")}))};var T={required:!0,message:\"Este campo es requerido\"};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(i.a,{children:Object(a.jsx)(S.a,{maskClosable:!1,title:\"Alta de personas\",centered:!0,visible:e.visible,onCancel:function(){return e.close(!1),void n.resetFields()},footer:null,children:Object(a.jsxs)(l.a,{onFinish:function(e){\"\"!==I&&(e.birth_date=I),E(e)},form:n,initialValues:{name:\"\",flast_name:\"\",mlast_name:\"\",birth_date:\"\",perms:[],email:\"\",password:\"\"},children:[Object(a.jsxs)(N.b,{children:[Object(a.jsx)(l.a.Item,{name:\"person_type\",children:Object(a.jsx)(b.a,{options:h,placeholder:\"Tipo de persona\"})}),Object(a.jsx)(l.a.Item,{name:\"job\",children:Object(a.jsx)(b.a,{options:w,placeholder:\"Puesto de trabajo\"})})]}),Object(a.jsx)(l.a.Item,{rules:[T],name:\"first_name\",children:Object(a.jsx)(p.a,{type:\"text\",placeholder:\"Nombre\"})}),Object(a.jsx)(l.a.Item,{rules:[T],name:\"flast_name\",children:Object(a.jsx)(p.a,{type:\"text\",placeholder:\"Apellido paterno...\"})}),Object(a.jsx)(l.a.Item,{name:\"mlast_name\",children:Object(a.jsx)(p.a,{type:\"text\",placeholder:\"Apellido materno...\"})}),Object(a.jsxs)(N.b,{children:[Object(a.jsx)(l.a.Item,{name:\"gender\",children:Object(a.jsx)(b.a,{options:[{label:\"Maculino\",value:1},{label:\"Femenino\",value:2},{label:\"Otro\",value:3}],placeholder:\"G\\xe9nero\"})}),Object(a.jsx)(l.a.Item,{children:Object(a.jsx)(P.a,{onChange:function(e,t){F(t)},moment:\"YYYY-MM-DD\",placeholder:\"Fecha de nacimiento\"})})]}),Object(a.jsx)(l.a.Item,{rules:[{type:\"email\",message:\"Ingrese un correo electronico valido\"},T],name:\"email\",children:Object(a.jsx)(p.a,{type:\"email\",placeholder:\"E-mail\"})}),Object(a.jsx)(l.a.Item,{rules:[T],name:\"password\",children:Object(a.jsx)(p.a.Password,{type:\"text\",placeholder:\"Contrase\\xf1a\"})}),Object(a.jsx)(l.a.Item,{name:\"groups\",children:Object(a.jsx)(b.a,{mode:\"multiple\",options:d,showArrow:!0,style:{width:\"100%\"},placeholder:\"Permisos...\"})}),Object(a.jsx)(l.a.Item,{labelAlign:\"right\",children:Object(a.jsxs)(N.b,{style:{float:\"right\"},children:[Object(a.jsx)(f.a,{type:\"danger\",onClick:function(){return e.close(!1)},children:\"Cancelar\"}),Object(a.jsx)(f.a,{type:\"primary\",htmlType:\"submit\",children:\"Guardar\"})]})})]})})})})},L=n(\"YFqc\"),A=n.n(L),Y=i.a.Content;t.default=function(){var e=Object(y.useState)([]),t=e[0],n=e[1],c=Object(y.useState)(!1),x=c[0],S=c[1],N=Object(y.useState)(!0),P=N[0],L=N[1],z=Object(y.useState)(!1),D=z[0],M=z[1],R=l.a.useForm(),q=Object(o.a)(R,1)[0],U=Object(y.useRef)(null),X={},B=function(e){S(!0),void 0==e?g.a.get(v.a+\"/person/person/\").then((function(e){e.data.results.map((function(e){e.key=e.id,e.fullname=e.first_name+\" \"+e.flast_name+\" \"+e.mlast_name,e.timestamp=e.timestamp.substring(0,10)})),n(e.data.results),S(!1)})).catch((function(e){console.log(e)})):g.a.post(v.a+\"/person/person/get_list_persons/ \",X).then((function(e){e.data.map((function(e){e.key=e.id,e.fullname=e.first_name+\" \"+e.flast_name+\" \"+e.mlast_name,e.timestamp=e.timestamp.substring(0,10)})),n(e.data),S(!1)})).catch((function(e){n([]),S(!1),console.log(e)}))};Object(y.useEffect)((function(){B()}),[]);var G=[{title:\"Nombre\",dataIndex:\"fullname\",key:\"fullname\"},{title:\"Fecha de registro\",dataIndex:\"timestamp\",key:\"timestamp\"},{title:\"RFC\",dataIndex:\"rfc\",key:\"rfc\"},{title:\"IMSS\",dataIndex:\"imss\",key:\"imss\"},{title:\"Opciones\",render:function(e){return Object(a.jsx)(\"div\",{children:Object(a.jsxs)(d.a,{gutter:16,children:[Object(a.jsx)(j.a,{className:\"gutter-row\",span:6,children:Object(a.jsx)(A.a,{href:\"/home/\".concat(e.id),children:Object(a.jsx)(w.a,{})})}),Object(a.jsx)(j.a,{className:\"gutter-row\",span:6,children:Object(a.jsx)(_.a,{})}),Object(a.jsx)(j.a,{className:\"gutter-row\",span:6,children:Object(a.jsx)(k.a,{})})]})})}}],H=function(e){M(e),S(!0),g.a.get(v.a+\"/person/person/\").then((function(e){e.data.results.map((function(e){e.key=e.id,e.fullname=e.first_name+\" \"+e.flast_name+\" \"+e.mlast_name,e.timestamp=e.timestamp.substring(0,10)})),n(e.data.results),S(!1)})).catch((function(e){console.log(e)}))},K=function(){var e=Object(r.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:\"csv\"==V(t.target.files[0].name)?((n=new FormData).append(\"File\",t.target.files[0]),console.log(n),S(!0),g.a.post(v.a+\"/person/import-export-person\",n).then((function(e){S(!1),u.b.success(\"Excel importado correctamente.\"),B()})).catch((function(e){S(!1),u.b.error(\"Error al importar.\"),console.log(e)}))):u.b.error(\"Formato incorrecto, suba un archivo .csv\");case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){return/[.]/.exec(e)?/[^.]+$/.exec(e)[0]:void 0};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(i.a,{children:[Object(a.jsx)(E.a,{}),Object(a.jsxs)(Y,{className:\"site-layout\",style:{padding:\"0 50px\",marginTop:64},children:[Object(a.jsxs)(m.a,{style:{margin:\"16px 0\"},children:[Object(a.jsx)(m.a.Item,{children:\"Home\"}),Object(a.jsx)(m.a.Item,{children:\"Person\"})]}),Object(a.jsxs)(\"div\",{className:\"site-layout-background\",style:{padding:24,minHeight:380,height:\"100%\"},children:[Object(a.jsxs)(\"div\",{style:{padding:24},children:[Object(a.jsxs)(l.a,{onFinish:function(e){void 0!==e.name&&\"\"!==e.name&&(X.first_name=e.name),void 0!==e.gender&&(X.gender=e.gender),void 0!==P&&(X.is_active=0==P?0:1),B(\"filter\")},layout:\"vertical\",form:q,children:[Object(a.jsxs)(d.a,{children:[Object(a.jsx)(j.a,{span:18,children:Object(a.jsx)(l.a.Item,{name:\"name\",children:Object(a.jsx)(p.a,{placeholder:\"Nombre...\"})})}),Object(a.jsx)(j.a,{span:5,children:Object(a.jsx)(l.a.Item,{name:\"gender\",children:Object(a.jsx)(b.a,{style:{marginLeft:\"10%\",width:\"100%\"},options:[{label:\"Maculino\",value:1},{label:\"Femenino\",value:2},{label:\"Otro\",value:3}],placeholder:\"G\\xe9nero\"})})})]}),Object(a.jsxs)(d.a,{style:{marginTop:\"2%\"},children:[Object(a.jsx)(j.a,{span:4,children:Object(a.jsxs)(l.a.Item,{name:\"is_active\",children:[Object(a.jsx)(\"label\",{children:Object(a.jsx)(\"span\",{style:{fontWeight:\"bold\"},children:\"Activos:\"})}),Object(a.jsx)(h.a,{style:{marginLeft:\"10%\"},defaultChecked:!0,onChange:function(){L(!P)}})]})}),Object(a.jsx)(j.a,{span:8,style:{float:\"right\"},children:Object(a.jsx)(l.a.Item,{children:Object(a.jsx)(f.a,{type:\"primary\",htmlType:\"submit\",children:\"Buscar\"})})})]})]}),Object(a.jsxs)(\"div\",{style:{float:\"right\"},children:[Object(a.jsxs)(f.a,{style:{background:\"#fa8c16\",fontWeight:\"bold\",color:\"white\"},onClick:function(){return H(!0)},children:[Object(a.jsx)(I.a,{}),\"Agregar persona\"]}),Object(a.jsx)(f.a,{type:\"primary\",icon:Object(a.jsx)(F.a,{}),size:{size:\"large\"},onClick:function(){return S(!0),void g.a.get(v.a+\"/person/import-export-person/csv\").then((function(e){var t=e.headers[\"content-type\"],n=new Blob([e.data],{type:t,encoding:\"UTF-8\"}),a=document.createElement(\"a\");a.href=window.URL.createObjectURL(n),a.download=\"Personas.csv\",a.click(),S(!1)})).catch((function(e){S(!1),console.log(e)}))},children:\"Descargar resultados\"}),Object(a.jsx)(f.a,{icon:Object(a.jsx)(C.a,{}),onClick:function(){U.current.click()},children:\"Importar personas\"}),Object(a.jsx)(\"input\",{ref:U,type:\"file\",style:{display:\"none\"},onChange:function(e){return K(e)}}),Object(a.jsx)(f.a,{type:\"primary\",icon:Object(a.jsx)(F.a,{}),size:{size:\"large\"},onClick:function(){return S(!0),void g.a.get(v.a+\"/person/import-export-person/plantilla\").then((function(e){var t=e.headers[\"content-type\"],n=new Blob([e.data],{type:t,encoding:\"UTF-8\"}),a=document.createElement(\"a\");a.href=window.URL.createObjectURL(n),a.download=\"PlantillaPersonas.csv\",a.click(),S(!1)})).catch((function(e){S(!1),console.log(e)}))},children:\"Descargar plantilla\"})]})]}),Object(a.jsx)(O.a,{size:\"small\",columns:G,dataSource:t,loading:x})]})]}),Object(a.jsx)(T,{close:H,visible:D})]})})}}},[[\"LrPk\",0,2,5,8,1,3,4,6]]]);","extractedComments":[]}