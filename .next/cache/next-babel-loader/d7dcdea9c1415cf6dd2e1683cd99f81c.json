{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Form, Input, Layout, Table, Breadcrumb, Tabs, Button, Row, Col, Modal, message } from \"antd\";\nimport { SearchOutlined, PlusOutlined, EditOutlined, DeleteOutlined, EllipsisOutlined, ExclamationCircleOutlined } from \"@ant-design/icons\";\nimport MainLayout from \"../../layout/MainLayout\";\nconst {\n  Content\n} = Layout;\nconst {\n  TabPane\n} = Tabs;\nconst {\n  confirm\n} = Modal;\nimport Axios from \"axios\";\nimport { API_URL, LOGIN_URL } from \"../../config/config\";\nimport { useRouter } from \"next/router\";\nimport { useState, useEffect } from \"react\";\n\nconst Groups = () => {\n  const router = useRouter();\n  const [form] = Form.useForm();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: groups,\n    1: setGroups\n  } = useState([]);\n  const headers = {\n    \"client-id\": \"5f417a53c37f6275fb614104\",\n    \"Content-Type\": \"application/json\"\n  };\n\n  const getGroups = text => {\n    setLoading(true);\n    Axios.get(LOGIN_URL + `/group/list/`, {\n      headers: headers\n    }).then(response => {\n      response.data.data.map(item => {\n        item[\"key\"] = item.id;\n        item.timestamp = item.timestamp.substring(0, 10);\n      });\n      setGroups(response.data.data);\n      setLoading(false);\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  const deleteGroup = async id => {\n    let data = {\n      id: id\n    };\n    Axios.post(LOGIN_URL + `/group/delete/`, data, {\n      headers: headers\n    }).then(function (response) {\n      if (response.status === 200) {\n        message.success({\n          content: \"Group eliminado satisfactoriamente\",\n          className: \"custom-class\",\n          style: {\n            marginTop: \"20vh\"\n          }\n        });\n        console.log(\"Elemento Eliminado\", id);\n        getGroups();\n      }\n    }).catch(function (error) {\n      message.error({\n        content: \"An error occurred\",\n        className: \"custom-class\",\n        style: {\n          marginTop: \"20vh\"\n        }\n      });\n      console.log(error);\n    });\n  };\n\n  const confirmDelete = id => {\n    confirm({\n      title: \"Esta seguro de eliminar el elemento?\",\n      icon: /*#__PURE__*/_jsx(ExclamationCircleOutlined, {}),\n      content: \"Si elimina el elemento no podrá recuperarlo\",\n\n      onOk() {\n        deleteGroup(id);\n      },\n\n      onCancel() {}\n\n    });\n  };\n\n  useEffect(() => {\n    getGroups();\n  }, []);\n\n  const filter = () => {};\n\n  const columns = [{\n    title: \"Nombre\",\n    dataIndex: \"name\",\n    key: \"name\"\n  }, {\n    title: \"Fecha de creación\",\n    render: item => {\n      return /*#__PURE__*/_jsx(\"div\", {\n        children: item.timestamp\n      });\n    }\n  }, {\n    title: \"Opciones\",\n    key: \"id\",\n    render: (text, record) => {\n      return /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsxs(Row, {\n          gutter: 16,\n          children: [/*#__PURE__*/_jsx(Col, {\n            className: \"gutter-row\",\n            span: 6,\n            children: /*#__PURE__*/_jsx(\"a\", {\n              onClick: () => router.push({\n                pathname: \"/groups/add\",\n                query: {\n                  type: \"edit\",\n                  id: record.id\n                }\n              }),\n              children: /*#__PURE__*/_jsx(EditOutlined, {})\n            })\n          }), /*#__PURE__*/_jsx(Col, {\n            className: \"gutter-row\",\n            span: 6,\n            children: /*#__PURE__*/_jsx(DeleteOutlined, {\n              onClick: () => confirmDelete(record.id)\n            })\n          })]\n        })\n      });\n    }\n  }];\n  return /*#__PURE__*/_jsxs(MainLayout, {\n    currentKey: \"1\",\n    children: [/*#__PURE__*/_jsxs(Breadcrumb, {\n      style: {\n        margin: \"16px 0\"\n      },\n      children: [/*#__PURE__*/_jsx(Breadcrumb.Item, {\n        children: \"Inicio\"\n      }), /*#__PURE__*/_jsx(Breadcrumb.Item, {\n        children: \"Groups\"\n      })]\n    }), /*#__PURE__*/_jsxs(Content, {\n      className: \"site-layout\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        style: {\n          padding: \"1%\",\n          float: \"right\"\n        },\n        children: /*#__PURE__*/_jsxs(Button, {\n          style: {\n            background: \"#fa8c16\",\n            fontWeight: \"bold\",\n            color: \"white\"\n          },\n          onClick: () => router.push({\n            pathname: \"/groups/add\"\n          }),\n          children: [/*#__PURE__*/_jsx(PlusOutlined, {}), \"Agregar grupo\"]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"site-layout-background\",\n        style: {\n          padding: 24,\n          minHeight: 380,\n          height: \"100%\"\n        },\n        children: /*#__PURE__*/_jsx(Table, {\n          size: \"small\",\n          columns: columns,\n          dataSource: groups,\n          loading: loading\n        })\n      })]\n    })]\n  });\n};\n\nexport default Groups;","map":null,"metadata":{},"sourceType":"module"}