{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { Form, Input, Layout, Modal, DatePicker, Button, Space, Select, message, Row, Col } from \"antd\";\nimport Axios from \"axios\";\nimport { API_URL } from \"../../config/config\";\nimport { useState, useEffect } from \"react\";\n\nvar FormPerson = function FormPerson(props) {\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState = useState([]),\n      groups = _useState[0],\n      setGroups = _useState[1];\n\n  var _useState2 = useState([]),\n      personType = _useState2[0],\n      setPersonType = _useState2[1];\n\n  var _useState3 = useState([]),\n      jobs = _useState3[0],\n      setJobs = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      date = _useState4[0],\n      setDate = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      departments = _useState5[0],\n      setDepartments = _useState5[1];\n\n  useEffect(function () {\n    var company_id = \"5f417a53c37f6275fb614104\";\n\n    if (company_id !== undefined) {\n      getValueSelects(company_id);\n    }\n  }, []);\n\n  var onFinish = function onFinish(value) {\n    if (date !== \"\") {\n      value.birth_date = date;\n    }\n\n    createPerson(value);\n  };\n\n  var getValueSelects = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      var headers;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              headers = {\n                \"client-id\": \"5f417a53c37f6275fb614104\",\n                \"Content-Type\": \"application/json\"\n              }; /////PERMSS GROUPS\n\n              Axios.get(\"https://khonnect.hiumanlab.com/group/list/\", {\n                headers: headers\n              }).then(function (response) {\n                if (response.status === 200) {\n                  var group = response.data.data;\n                  group = group.map(function (a) {\n                    return {\n                      label: a.name,\n                      value: a.id\n                    };\n                  });\n                  setGroups(group);\n                }\n              })[\"catch\"](function (e) {\n                console.log(e);\n              }); /////PERSON TYPE\n\n              Axios.get(API_URL + \"/person/person-type/\").then(function (response) {\n                if (response.status === 200) {\n                  var typesPerson = response.data.results;\n                  typesPerson = typesPerson.map(function (a) {\n                    return {\n                      label: a.name,\n                      value: a.id\n                    };\n                  });\n                  setPersonType(typesPerson);\n                }\n              })[\"catch\"](function (e) {\n                console.log(e);\n              }); /////DEPARTMENTS\n\n              Axios.get(API_URL + \"/business/department/\").then(function (response) {\n                if (response.status === 200) {\n                  var dep = response.data.results;\n                  dep = dep.map(function (a) {\n                    return {\n                      label: a.name,\n                      value: a.id\n                    };\n                  });\n                  setDepartments(dep);\n                }\n              })[\"catch\"](function (e) {\n                console.log(e);\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getValueSelects(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var createPerson = function createPerson(value) {\n    Axios.post(API_URL + \"/person/person/\", value).then(function (response) {\n      message.success(\"Agregado correctamente\");\n      form.resetFields();\n      props.close(false);\n    })[\"catch\"](function (response) {\n      message.error(\"Error al agregar, intente de nuevo\");\n    });\n  };\n\n  var genders = [{\n    label: \"Masculino\",\n    value: 1\n  }, {\n    label: \"Femenino\",\n    value: 2\n  }, {\n    label: \"Otro\",\n    value: 3\n  }];\n  var ruleEmail = {\n    type: \"email\",\n    message: \"Ingrese un correo electronico valido\"\n  };\n\n  function onChange(date, dateString) {\n    setDate(dateString);\n  }\n\n  var onChangeDepartment = function onChangeDepartment(value) {\n    ////JOBS\n    Axios.get(API_URL + \"/business/department/\".concat(value, \"/job_for_department/\")).then(function (response) {\n      if (response.status === 200) {\n        var job = response.data;\n        job = job.map(function (a) {\n          return {\n            label: a.name,\n            value: a.id\n          };\n        });\n        setJobs(job);\n      }\n    })[\"catch\"](function (e) {\n      console.log(e);\n    });\n  };\n\n  var closeDialog = function closeDialog() {\n    props.close(false);\n    form.resetFields();\n  };\n\n  var ruleRequired = {\n    required: true,\n    message: \"Este campo es requerido\"\n  };\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(Layout, {\n      children: /*#__PURE__*/_jsx(Modal, {\n        maskClosable: false,\n        title: \"Alta de personas\",\n        centered: true,\n        visible: props.visible,\n        onCancel: function onCancel() {\n          return closeDialog();\n        },\n        footer: null,\n        width: \"60%\",\n        children: /*#__PURE__*/_jsx(Form, {\n          onFinish: onFinish,\n          form: form,\n          children: /*#__PURE__*/_jsxs(Row, {\n            children: [/*#__PURE__*/_jsx(Col, {\n              lg: 7,\n              xs: 22,\n              offset: 1,\n              children: /*#__PURE__*/_jsx(Form.Item, {\n                name: \"person_type\",\n                children: /*#__PURE__*/_jsx(Select, {\n                  options: personType,\n                  placeholder: \"Tipo de persona\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 7,\n              xs: 22,\n              offset: 1,\n              children: /*#__PURE__*/_jsx(Form.Item, {\n                name: \"department\",\n                children: /*#__PURE__*/_jsx(Select, {\n                  options: departments,\n                  onChange: onChangeDepartment,\n                  placeholder: \"Departamento\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 7,\n              xs: 22,\n              offset: 1,\n              children: /*#__PURE__*/_jsx(Form.Item, {\n                name: \"job\",\n                children: /*#__PURE__*/_jsx(Select, {\n                  options: jobs,\n                  placeholder: \"Puesto de trabajo\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 7,\n              xs: 22,\n              offset: 1,\n              children: /*#__PURE__*/_jsx(Form.Item, {\n                rules: [ruleRequired],\n                name: \"first_name\",\n                children: /*#__PURE__*/_jsx(Input, {\n                  type: \"text\",\n                  placeholder: \"Nombre\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 7,\n              xs: 22,\n              offset: 1,\n              children: /*#__PURE__*/_jsx(Form.Item, {\n                rules: [ruleRequired],\n                name: \"flast_name\",\n                children: /*#__PURE__*/_jsx(Input, {\n                  type: \"text\",\n                  placeholder: \"Apellido paterno\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 7,\n              xs: 22,\n              offset: 1,\n              children: /*#__PURE__*/_jsx(Form.Item, {\n                name: \"mlast_name\",\n                children: /*#__PURE__*/_jsx(Input, {\n                  type: \"text\",\n                  placeholder: \"Apellido materno\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 7,\n              xs: 22,\n              offset: 1,\n              children: /*#__PURE__*/_jsx(Form.Item, {\n                name: \"gender\",\n                children: /*#__PURE__*/_jsx(Select, {\n                  options: genders,\n                  placeholder: \"G\\xE9nero\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 7,\n              xs: 22,\n              offset: 1,\n              children: /*#__PURE__*/_jsx(Form.Item, {\n                children: /*#__PURE__*/_jsx(DatePicker, {\n                  style: {\n                    width: \"100%\"\n                  },\n                  onChange: onChange,\n                  moment: \"YYYY-MM-DD\",\n                  placeholder: \"Fecha de nacimiento\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 7,\n              xs: 22,\n              offset: 1,\n              children: /*#__PURE__*/_jsx(Form.Item, {\n                rules: [ruleEmail, ruleRequired],\n                name: \"email\",\n                children: /*#__PURE__*/_jsx(Input, {\n                  type: \"email\",\n                  placeholder: \"E-mail\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 7,\n              xs: 22,\n              offset: 1,\n              children: /*#__PURE__*/_jsx(Form.Item, {\n                rules: [ruleRequired],\n                name: \"password\",\n                children: /*#__PURE__*/_jsx(Input.Password, {\n                  type: \"text\",\n                  placeholder: \"Contrase\\xF1a\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 15,\n              xs: 22,\n              offset: 1,\n              children: /*#__PURE__*/_jsx(Form.Item, {\n                name: \"groups\",\n                children: /*#__PURE__*/_jsx(Select, {\n                  mode: \"multiple\",\n                  options: groups,\n                  showArrow: true,\n                  style: {\n                    width: \"100%\"\n                  },\n                  placeholder: \"Permisos\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 22,\n              xs: 22,\n              offset: 1,\n              children: /*#__PURE__*/_jsx(Form.Item, {\n                labelAlign: \"right\",\n                children: /*#__PURE__*/_jsxs(Space, {\n                  style: {\n                    \"float\": \"right\"\n                  },\n                  children: [/*#__PURE__*/_jsx(Button, {\n                    onClick: function onClick() {\n                      return closeDialog();\n                    },\n                    children: \"Cancelar\"\n                  }), /*#__PURE__*/_jsx(Button, {\n                    type: \"primary\",\n                    htmlType: \"submit\",\n                    children: \"Guardar\"\n                  })]\n                })\n              })\n            })]\n          })\n        })\n      })\n    })\n  });\n};\n\nexport default FormPerson;","map":null,"metadata":{},"sourceType":"module"}