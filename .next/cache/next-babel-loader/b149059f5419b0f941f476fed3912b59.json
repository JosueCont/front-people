{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport { Tabs, Radio, Row, Col, Breadcrumb, Typography, Button, Select, Form, Image, Input } from 'antd';\nimport MainLayout from \"../../../layout/MainLayout\";\nimport { render } from \"react-dom\";\nimport { useRouter } from \"next/router\";\nimport axiosApi from '../../../libs/axiosApi';\nimport moment from \"moment\";\nimport Vacationform from '../../../components/vacations/Vacationform';\nexport default function HolidaysDetails() {\n  var route = useRouter();\n  var TabPane = Tabs.TabPane;\n  var Title = Typography.Title;\n  var Options = Select.Options;\n\n  var _useState = useState(null),\n      details = _useState[0],\n      setDetails = _useState[1];\n\n  var id = route.query.id;\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      sending = _useState3[0],\n      setSending = _useState3[1];\n\n  var _useState4 = useState(null),\n      daysRequested = _useState4[0],\n      setDaysRequested = _useState4[1];\n\n  var _useState5 = useState(null),\n      departureDate = _useState5[0],\n      setDepartureDate = _useState5[1];\n\n  var _useState6 = useState(null),\n      returnDate = _useState6[0],\n      setReturnDate = _useState6[1];\n\n  var _useState7 = useState(null),\n      availableDays = _useState7[0],\n      setAvailableDays = _useState7[1];\n\n  var _useState8 = useState(null),\n      personList = _useState8[0],\n      setPersonList = _useState8[1];\n\n  var _useState9 = useState(null),\n      allPersons = _useState9[0],\n      setAllPersons = _useState9[1];\n\n  var _useState10 = useState(null),\n      job = _useState10[0],\n      setJob = _useState10[1];\n\n  var _useState11 = useState(null),\n      dateOfAdmission = _useState11[0],\n      setDateOfAdmission = _useState11[1];\n\n  var onCancel = function onCancel() {\n    route.push(\"/holidays\");\n  };\n\n  var onChangeDepartureDate = function onChangeDepartureDate(date, dateString) {\n    console.log('date', date);\n    console.log('dateString', dateString);\n    setDepartureDate(dateString);\n  };\n\n  var onChangeReturnDate = function onChangeReturnDate(date, dateString) {\n    setReturnDate(dateString);\n  };\n\n  var changePerson = function changePerson(value) {\n    console.log(value);\n    var index = allPersons.find(function (data) {\n      return data.id === value;\n    });\n    console.log(index);\n    setDateOfAdmission(moment(index.date_of_admission).format('DD/MM/YYYY'));\n\n    if (index.job_department.job) {\n      setJob(index.job_department.job.name);\n    }\n  };\n\n  var getDetails = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axiosApi.get(\"/person/vacation/\".concat(id, \"/\"));\n\n            case 3:\n              response = _context.sent;\n              data = response.data;\n              console.log(\"data\", data);\n              setDaysRequested(data.days_requested);\n              setDepartureDate(moment(data.departure_date).format('DD/MM/YYYY'));\n              setReturnDate(moment(data.return_date).format('DD/MM/YYYY'));\n              setAvailableDays(data.available_days);\n              setLoading(false);\n              /* setLoading(false); */\n              //setList(data.results)\n\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(\"error\", _context.t0);\n              /* setLoading(false); */\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 13]]);\n    }));\n\n    return function getDetails() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var saveRequest = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(values);\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function saveRequest(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    setLoading(true);\n\n    if (id) {\n      getDetails();\n    }\n  }, [route]);\n  return /*#__PURE__*/_jsxs(MainLayout, {\n    currentKey: \"5\",\n    children: [/*#__PURE__*/_jsxs(Breadcrumb, {\n      className: 'mainBreadcrumb',\n      children: [/*#__PURE__*/_jsx(Breadcrumb.Item, {\n        children: \"Inicio\"\n      }), /*#__PURE__*/_jsx(Breadcrumb.Item, {\n        href: \"/holidays\",\n        children: \"Vacaciones\"\n      }), /*#__PURE__*/_jsx(Breadcrumb.Item, {\n        children: \"Editar solicitud\"\n      })]\n    }, \"Breadcrumb\"), /*#__PURE__*/_jsx(\"div\", {\n      className: \"container back-white\",\n      style: {\n        width: \"100%\",\n        padding: '20px 0'\n      },\n      children: /*#__PURE__*/_jsx(Row, {\n        justify: 'center',\n        children: /*#__PURE__*/_jsx(Col, {\n          span: 23,\n          children: !loading ? /*#__PURE__*/_jsx(Form, {\n            form: form,\n            layout: \"horizontal\",\n            onFinish: saveRequest,\n            children: /*#__PURE__*/_jsx(Vacationform, {\n              returnDate: returnDate,\n              departureDate: departureDate,\n              daysRequested: daysRequested,\n              availableDays: availableDays,\n              sending: sending,\n              dateOfAdmission: dateOfAdmission,\n              job: job,\n              personList: personList,\n              onChangeDepartureDate: onChangeDepartureDate,\n              onCancel: onCancel,\n              changePerson: changePerson\n            })\n          }) : null\n        })\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}