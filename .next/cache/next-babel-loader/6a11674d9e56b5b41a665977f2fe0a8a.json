{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Form, Input, Button, Checkbox, Spin, Alert } from \"antd\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { LOGIN_URL } from \"../config/config\";\nimport Axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport jwt_decode from \"jwt-decode\";\n\nconst LoginForm = () => {\n  const router = useRouter();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(null);\n  const {\n    0: errorLogin,\n    1: setErrorLogin\n  } = useState(false);\n\n  const onFinish = values => {\n    login(values.email, values.password);\n  };\n\n  const login = async (email, password) => {\n    try {\n      setErrorLogin(false);\n      setLoading(true);\n      const headers = {\n        \"client-id\": \"5f417a53c37f6275fb614104\",\n        \"Content-Type\": \"application/json\"\n      };\n      const data = {\n        email: email,\n        password: password\n      };\n      Axios.post(LOGIN_URL + \"/login/\", data, {\n        headers: headers\n      }).then(function (response) {\n        if (response.status === 200) {\n          let token = jwt_decode(response.data.token);\n\n          if (token) {\n            Cookies.set(\"userToken\", token);\n            setLoading(false);\n            router.push({\n              pathname: \"/home\"\n            });\n          }\n        } else {\n          setLoading(false);\n          setErrorLogin(true);\n        }\n      }).catch(function (error) {\n        setLoading(false);\n        setErrorLogin(true);\n        console.log(error);\n      });\n    } catch (e) {\n      alert(\"Hubo un  problema al iniciar sesi√≥n, por favor verifica tus credenciales\");\n      console.log(e);\n    } finally {}\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Spin, {\n      tip: \"Loading...\",\n      spinning: loading\n    }), /*#__PURE__*/_jsxs(Form, {\n      name: \"normal_login\",\n      className: \"login-form\",\n      initialValues: {\n        remember: true\n      },\n      onFinish: onFinish,\n      children: [/*#__PURE__*/_jsx(Form.Item, {\n        name: \"email\",\n        label: \"Correo\",\n        rules: [{\n          required: true,\n          message: \"Please input your Email!\"\n        }],\n        children: /*#__PURE__*/_jsx(Input, {\n          placeholder: \"Username\"\n        })\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        name: \"password\",\n        label: \"Contrase\\xF1a\",\n        rules: [{\n          required: true,\n          message: \"Please input your Password!\"\n        }],\n        children: /*#__PURE__*/_jsx(Input, {\n          type: \"password\",\n          placeholder: \"Password\"\n        })\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        children: /*#__PURE__*/_jsx(Form.Item, {\n          name: \"remember\",\n          valuePropName: \"checked\",\n          className: \"ckeck-khor\",\n          noStyle: true,\n          children: /*#__PURE__*/_jsx(Checkbox, {\n            children: \"Remember me\"\n          })\n        })\n      }), errorLogin && /*#__PURE__*/_jsx(Alert, {\n        message: \"Error iniciar sesi\\xF3n\",\n        description: \"La contrase\\xF1a y/o correo no son correctos\",\n        type: \"error\",\n        style: {\n          textAlign: \"center\"\n        }\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        children: /*#__PURE__*/_jsx(Button, {\n          style: {\n            width: \"100%!important\"\n          },\n          type: \"primary\",\n          htmlType: \"submit\",\n          className: \"login-form-button\",\n          children: \"Log in\"\n        })\n      })]\n    })]\n  });\n};\n\nexport default LoginForm;","map":null,"metadata":{},"sourceType":"module"}